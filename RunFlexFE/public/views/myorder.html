<div class="container" style="margin-top: 50px;">
    <div class="row">
        <div class="col-md-3 col-sm-12 col-xs-12 sidebar-fix">
            <div class="wrap-filter">
                <div class="box_sidebar">
                    <div class="block left-module">
                        <div class=" filter_xs">
                            <div class="profile">
                                <img src="https://res.cloudinary.com/dvdgvw0lj/image/upload/v1733900015/56c14bbb-e695-48cf-b5e2-011d4c73e399.png" alt="Avatar" class="avatar">
                                <span class="name">Lương Thành Công</span>
                            </div>
                            <div class="layered">
                                <ul class="menu-items">
                                    <li>
                                        <a href="/account">
                                            <i class="icon-user"></i>
                                            <span>Tài Khoản Của Tôi</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="/myorder">
                                            <i class="icon-shopping-cart"></i>
                                            <span>Đơn Mua</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a ng-click="logout()">
                                            <i class="icon-power-off"></i>
                                            <span>Đăng Xuất</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-9 col-sm-12 col-xs-12">
            <div class="process-container">
                <div class="process-item" data-status="Tất cả">Tất cả</div>
                <div class="process-item" data-status="Chờ xác nhận">Chờ xác nhận</div>
                <div class="process-item" data-status="Chờ lấy hàng">Chờ lấy hàng</div>
                <div class="process-item" data-status="Đang giao">Đang giao</div>
                <div class="process-item" data-status="Đã giao">Đã giao</div>
                <div class="process-item" data-status="Đã Hủy">Đã Hủy</div>
            </div>

            <table class="order-table">
                <thead>
                    <tr>
                        <th>Mã đơn hàng</th>
                        <th>Giá đơn hàng</th>
                        <th>Ngày tạo</th>
                        <th>Trạng thái</th>
                        <th>Xem chi tiết</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="invoice in invoices">
                        <td>{{invoice.InvoiceCode}}</td>
                        <td>{{invoice.TotalAmount}} đ</td>
                        <td>{{invoice.CreatedDate}}</td>
                        <td>{{getStatusText(invoice.Status)}}</td>
                        <td><button class="view-btn" ng-click="viewDetails(invoice)"><i class="fas fa-eye"></i> Chi tiết</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Modal hiển thị chi tiết hóa đơn -->
        <div id="detailsModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content shadow-lg">
                    <!-- Header -->
                    <div class="modal-header bg-primary text-white">
                        <h5 class="modal-title">
                            <i class="fas fa-receipt"></i> Chi tiết hóa đơn
                        </h5>
                        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                    </div>

                    <!-- Body -->
                    <div class="modal-body">
                        <div class="container">
                            <div class="">
                                <div class="col-sm-6 d-flex">
                                    <strong class="mr-2">Mã đơn hàng:</strong>
                                    <p class="mb-0">{{selectedInvoice.InvoiceCode}}</p>
                                </div>
                                <div class="col-sm-6 d-flex">
                                    <strong class="mr-2">Ngày tạo:</strong>
                                    <p class="mb-0">{{selectedInvoice.CreatedDate | date:'dd/MM/yyyy'}}</p>
                                </div>
                                <div class="col-sm-12 d-flex">
                                    <strong class="mr-2">Phương thức thanh toán:</strong>
                                    <p class="mb-0">{{selectedInvoice.PaymentMethod==1?'Thanh toán khi nhận hàng':'Chuyển khoản';}}</p>
                                </div>
                                <div class="col-sm-12 d-flex">
                                    <strong class="mr-2">Người nhận hàng:</strong>
                                    <p class="mb-0">{{selectedInvoice.ConsigneeName}}</p>
                                </div>
                                <div class="col-sm-12 d-flex">
                                    <strong class="mr-2">Số điện thoại:</strong>
                                    <p class="mb-0">{{selectedInvoice.PhoneNumber}}</p>
                                </div>
                                <div class="col-sm-12 d-flex">
                                    <strong class="mr-2">Địa chỉ:</strong>
                                    <p class="mb-0">{{selectedInvoice.DeliveryAddress}}</p>
                                </div>
                                <div class="col-sm-6">
                                    <strong class="mr-2">Trạng thái:</strong>
                                    <p class="badge badge-info mb-0">{{getStatusText(selectedInvoice.Status)}}</p>
                                </div>

                            </div>

                            <!-- <div class="row mb-3">
                                <div class="col-sm-6">
                                    <strong>Giá đơn hàng:</strong>
                                    <p>{{selectedInvoice.TotalAmount}} đ</p>
                                </div>
                                <div class="col-sm-6">
                                    <strong>Trạng thái:</strong>
                                    <p class="badge badge-info">{{getStatusText(selectedInvoice.Status)}}</p>
                                </div>
                            </div> -->

                            <div class="">
                                <table class="order-table">
                                    <thead>
                                        <tr>
                                            <th>Ảnh</th>
                                            <th>Tên sản phẩm</th>
                                            <th>Số lượng</th>
                                            <th>Đơn giá</th>
                                            <th>Tổng giá</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="invoiceDetail in invoiceDetails">
                                            <td><img src={{invoiceDetail.ImageURL}} alt=""></td>
                                            <td>{{invoiceDetail.ProductDetailCode}}-{{invoiceDetail.ProductName}}<br>[Chất liệu: {{invoiceDetail.MaterialName}} - Màu: {{invoiceDetail.ColorName}} - Size: {{invoiceDetail.SizeNumber}}]</td>
                                            <td>{{invoiceDetail.Quantity}}</td>
                                            <td>{{invoiceDetail.CurrentPrice}} đ</td>
                                            <td>{{invoiceDetail.TotalPrice}} đ</td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th colspan="3" class="text-right">Tổng hóa đơn:</th>
                                            <td colspan="2">{{selectedInvoice.TotalAmount}} đ</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>

                            <!-- Extra Information -->
                            <div class="row">
                                <div class="col-12">
                                    <strong>Ghi chú:</strong>
                                    <p class="text-muted">
                                        {{selectedInvoice.Description || 'Không có ghi chú'}}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal" ng-click="cancelOrder(selectedInvoice.ID)" ng-if="selectedInvoice.Status == 1 || selectedInvoice.Status == 2">
                    <i class="fas fa-times"></i> Hủy đơn hàng
                </button>
                        <button type="button" class="btn btn-success">
                    <i class="fas fa-check"></i> Xác nhận
                </button>
                    </div>
                </div>
            </div>
        </div>


    </div>
</div>